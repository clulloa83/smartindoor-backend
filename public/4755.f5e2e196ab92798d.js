"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4755],{4755:(B,D,r)=>{r.r(D),r.d(D,{DispositivosPageModule:()=>J});var x=r(6895),T=r(4719),e=r(1558),Z=r(2507),m=r(5861),y=r(9337),S=r(9786),i=r(6353),P=r(2151),b=r(8555),C=r(5970),A=r(9498);function U(o,c){if(1&o&&(i.TgZ(0,"ion-chip",16)(1,"ion-label"),i._uU(2),i.qZA()()),2&o){const t=c.$implicit;i.xp6(2),i.Oqu(t)}}function M(o,c){if(1&o){const t=i.EpF();i.TgZ(0,"ion-item-sliding",9)(1,"ion-item"),i._UZ(2,"ion-icon",10),i.TgZ(3,"ion-label")(4,"h1"),i._uU(5),i.qZA(),i._UZ(6,"br"),i.TgZ(7,"small"),i._uU(8),i.qZA(),i._UZ(9,"br"),i.TgZ(10,"small"),i._uU(11),i.qZA(),i._UZ(12,"br"),i.YNc(13,U,3,1,"ion-chip",11),i.qZA(),i.TgZ(14,"ion-button",12),i.NdJ("click",function(){const d=i.CHM(t).$implicit,v=i.oxw();return i.KtG(v.obtenerOpciones(d))}),i._uU(15,"Ver"),i.qZA()(),i.TgZ(16,"ion-item-options")(17,"ion-item-option",4),i.NdJ("click",function(){const d=i.CHM(t).$implicit,v=i.oxw();return i.KtG(v.editarDispositivo(d))}),i._UZ(18,"ion-icon",13),i.qZA(),i.TgZ(19,"ion-item-option",14),i.NdJ("click",function(){const d=i.CHM(t).$implicit,v=i.oxw();return i.KtG(v.confirmarEliminar(d.id))}),i._UZ(20,"ion-icon",15),i.qZA()()()}if(2&o){const t=c.$implicit;i.xp6(2),i.Q6J("name",t.icon),i.xp6(3),i.Oqu(t.nombre),i.xp6(3),i.hij("Ubicaci\xf3n: ",t.ubicacion,""),i.xp6(3),i.hij("Categoria: ",t.categoria,""),i.xp6(2),i.Q6J("ngForOf",t.tipos)}}const O=[{path:"",component:(()=>{class o{constructor(t,u,g,d,v,_){var n=this;this.dispositivosService=t,this.actionSheetController=u,this.router=g,this.loaderService=d,this.alertService=v,this.Navparams=_,this.dispositivos=[],this.inicializar=(0,m.Z)(function*(){yield n.obtenerDispositivos()}),this.obtenerDispositivos=(0,m.Z)(function*(){yield n.loaderService.simpleLoader("cargando");try{n.dispositivos=yield n.dispositivosService.dispositivosObtener(),yield n.loaderService.dismissLoader()}catch(l){yield n.loaderService.dismissLoader(),console.log("obtenerDispositivos2 error",l);const s=new y.b;s.header="Error al obtener dispositivos",s.message="Se ha producido un error, favor intentar m\xe1s tarde",s.buttons=["OK"],yield n.alertService.simpleAlert(s)}}),this.loadMore=l=>{setTimeout(()=>{l.target.complete(),this.inicializar(),1e3===this.dispositivos.length&&(l.target.disabled=!0)},1e3)},this.obtenerOpciones=function(){var l=(0,m.Z)(function*(s){const a=[];if(s.tipos.find(p=>"temperatura"===p)){let p={text:"ver temperatura",icon:"thermometer-outline",handler:()=>{n.router.navigate([`temperatura/${s.id}`])}};a.push(p),p={text:"ver grafico",icon:"stats-chart-outline",handler:()=>{n.router.navigate([`grafico/${s.id}`])}},a.push(p)}s.tipos.find(p=>"interruptor"===p)&&a.push({text:"ver programas",icon:"alarm-outline",handler:()=>{n.router.navigate([`programas/${s.id}`])}}),a.push({text:"Cancel",role:"cancel",icon:"close-outline"}),yield(yield n.actionSheetController.create({header:"Opciones",buttons:a})).present()});return function(s){return l.apply(this,arguments)}}(),this.editarDispositivo=function(){var l=(0,m.Z)(function*(s){n.Navparams.setData(s),n.router.navigateByUrl(`/dispositivo-editar/${s.id}`)});return function(s){return l.apply(this,arguments)}}(),this.confirmarEliminar=function(){var l=(0,m.Z)(function*(s){const a=new y.b;var f;a.header="Alerta!",a.message="favor confirmar eliminaci\xf3n de dispositivo",a.buttons=[{text:"Cancel",role:"cancel",handler:()=>{}},{text:"OK",role:"confirm",handler:(f=(0,m.Z)(function*(){yield n.eliminarDispositivo(s)}),function(){return f.apply(this,arguments)})}],yield n.alertService.simpleAlert(a)});return function(s){return l.apply(this,arguments)}}(),this.eliminarDispositivo=function(){var l=(0,m.Z)(function*(s){const a=new S.d;a.id=s;try{yield n.loaderService.simpleLoader("cargando"),yield n.dispositivosService.dispositivoEliminarPorId(a),yield n.loaderService.dismissLoader(),yield n.inicializar()}catch(f){console.log("eliminarDispositivo error",f),n.loaderService.dismissLoader();const h=new y.b;h.header="Error al eliminar dispositivo",h.message="Se ha producido un error, favor intentar m\xe1s tarde",h.buttons=["OK"],n.alertService.simpleAlert(h)}});return function(s){return l.apply(this,arguments)}}(),this.agregarDispositivo=()=>{this.router.navigateByUrl("/dispositivo")}}ionViewWillEnter(){this.inicializar()}}return o.\u0275fac=function(t){return new(t||o)(i.Y36(P.U),i.Y36(e.BX),i.Y36(Z.F0),i.Y36(b.D),i.Y36(C.c),i.Y36(A.a))},o.\u0275cmp=i.Xpm({type:o,selectors:[["app-dispositivos"]],decls:14,vars:1,consts:[[1,"ion-text-center"],["slot","start"],["menu","primerMenu","autoHide","false"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add"],["reorder","true",4,"ngFor","ngForOf"],["position","bottom","threshold","30%",3,"ionInfinite"],["loadingSpinner","crescent","loadingText","Cargando m\xe1s datos..."],["reorder","true"],["slot","start",3,"name"],["outline","","color","primary",4,"ngFor","ngForOf"],["fill","outline","slot","end",3,"click"],["slot","icon-only","name","create-outline"],["color","danger",3,"click"],["slot","icon-only","name","trash-outline"],["outline","","color","primary"]],template:function(t,u){1&t&&(i.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",0),i._uU(3,"Dispositivos"),i.qZA(),i.TgZ(4,"ion-buttons",1),i._UZ(5,"ion-menu-button",2),i.qZA()()(),i.TgZ(6,"ion-content")(7,"ion-fab",3)(8,"ion-fab-button",4),i.NdJ("click",function(){return u.agregarDispositivo()}),i._UZ(9,"ion-icon",5),i.qZA()(),i.TgZ(10,"ion-list"),i.YNc(11,M,21,5,"ion-item-sliding",6),i.qZA(),i.TgZ(12,"ion-infinite-scroll",7),i.NdJ("ionInfinite",function(d){return u.loadMore(d)}),i._UZ(13,"ion-infinite-scroll-content",8),i.qZA()()),2&t&&(i.xp6(11),i.Q6J("ngForOf",u.dispositivos))},dependencies:[x.sg,e.YG,e.Sm,e.hM,e.W2,e.IJ,e.W4,e.Gu,e.gu,e.ju,e.MB,e.Ie,e.u8,e.IK,e.td,e.Q$,e.q_,e.fG,e.sr,e.wd]}),o})()},{path:"dispositivo",loadChildren:()=>r.e(8592).then(r.bind(r,9969)).then(o=>o.DispositivoPageModule)},{path:"dispositivo-editar",loadChildren:()=>r.e(8592).then(r.bind(r,6103)).then(o=>o.DispositivoEditarPageModule)}];let F=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=i.oAB({type:o}),o.\u0275inj=i.cJS({imports:[Z.Bz.forChild(O),Z.Bz]}),o})(),J=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=i.oAB({type:o}),o.\u0275inj=i.cJS({imports:[x.ez,T.u5,e.Pc,F]}),o})()}}]);